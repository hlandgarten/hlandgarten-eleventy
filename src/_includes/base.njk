<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title or "Harris Landgarten" }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/base.css' | url }}">
  <link rel="stylesheet" href="{{ '/assets/css/page.css' | url }}">
  <link rel="stylesheet" href="{{ '/assets/css/story.css' | url }}">
  <link rel="stylesheet" href="{{ '/assets/css/legacy.css' | url }}">

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body x-data="{ navOpen: false, isMobile: window.innerWidth < 768 }" x-init="$watch('navOpen', () => { if (!isMobile) navOpen = false })">


<header class="site-header" x-data="{ navOpen: false }">
  <div class="container">
    <!-- Logo on top -->
    <div class="site-logo-wrapper">
      <a href="/" class="logo-link">
        <img src="{{ '/assets/images/logo-hbl.png' | url }}" alt="HBL Logo" class="logo-large no-lightbox" />
      </a>
    </div>

      <!-- Hamburger (mobile only) -->
      <button
        class="hamburger"
        @click="navOpen = !navOpen"
        :aria-expanded="navOpen"
        aria-label="Toggle menu"
      >
        &#9776;
      </button>

      <!-- Desktop Navigation -->
      <nav class="desktop-nav">
  <ul>
    {% for item in navigation %}
      <li
        class="nav-item"
        x-data="{ subOpen: false }"
        @mouseenter="subOpen = true"
        @mouseleave="subOpen = false"
      >
        <a href="{{ item.url | url }}" class="{% if page.url == item.url %}active{% endif %}">{{ item.title }}</a>

        {% if item.submenu %}
          <ul
            class="sub-menu"
            x-show="subOpen"
            x-transition
            x-cloak
          >
            {% for sub in item.submenu %}
              <li><a href="{{ sub.url | url }}">{{ sub.title }}</a></li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>

    </div>
  </div>

  <!-- Backdrop for mobile -->
  <div
    class="mobile-drawer-backdrop"
    x-show="navOpen"
    x-transition.opacity
    @click="navOpen = false"
    x-cloak
  ></div>

  <!-- Mobile Drawer Menu -->
  <aside
    class="mobile-drawer"
    x-show="navOpen"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="translate-x-full"
    x-transition:enter-end="translate-x-0"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="translate-x-0"
    x-transition:leave-end="translate-x-full"
    @click.away="navOpen = false"
    x-cloak
  >
    <nav class="mobile-nav">
      <ul>
        {% for item in navigation %}
          <li>
            <a href="{{ item.url | url }}">{{ item.title }}</a>
            {% if item.submenu %}
              <ul>
                {% for sub in item.submenu %}
                  <li><a href="{{ sub.url | url }}">{{ sub.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>
  </aside>
</header>

<main class="site-content">
  {% block content %}{% endblock %}
</main>

<footer class="site-footer">
  <p>&copy; {{ "now" | date("yyyy") }} Harris Landgarten. All rights reserved.</p>
</footer>

<script src="{{ '/assets/js/scripts.js' | url }}" defer></script>

<div id="lightbox" class="lightbox" onclick="this.style.display='none'">
  <img id="lightbox-img" src="" alt="Expanded image">
</div>

</body>
</html>

